name: CI
on:
  pull_request:
jobs:
  build:
    name: Build
    steps:
      - name: scalafmt
        runs-on: ubuntu-latest
        - uses: actions/checkout@v1
        - uses: olafurpg/setup-scala@v7
        - run: git config --global github.actor avibryant
        - run: sbt scalafmtCheck
      - name: test
        runs-on: ubuntu-latest
        - uses: actions/checkout@v1
        - uses: olafurpg/setup-scala@v7
        env:
              SCALAC_FATAL_WARNINGS: true
        - run: git config --global github.actor avibryant
        - run: sbt '+test'
      - name: package
        runs-on: ubuntu-latest
        - uses: actions/checkout@v1
        - uses: olafurpg/setup-scala@v7
        env:
          PACKAGE_TOKEN: ${{ secrets.avibryant }}
        - run: git config --global github.actor avibryant
        - run: sbt publish